.. _common-component.rst:

==============================
共通ルール: コンポーネント
==============================

この章では、各コンポーネントの詳細な構造や振る舞いについて説明します。

各コンポーネントは、配置先の「領域（ゾーン）」に置かれて使用されます。
詳細は共通ルール :numref:`zone-section` を参照してください。


コンポーネントの概要
==============================

.. index::
   single: コンポーネント
   single: コンポーネントスクリプト
   single: ユニット
   single: ユニット条件
   single: ゾーン

**コンポーネント** は、各 **領域（ゾーン）** に「何が置かれ、どう扱うか」を決める **対象の種類** の総称です。  
将棋の比喩で言えば、盤上に歩が何枚あっても“歩という定義は 1 つ”であるのと同じで、BlackPoker でも **定義（= コンポーネントスクリプト）** があり、その定義に合致する **ユニット（盤面の実体）** が複数存在し得ます。


------------------------------
用語の要点
------------------------------

**コンポーネント種別**  
  各 **ゾーン** に置かれる要素の “種類” を表す分類です。  
  ゾーンと 1 対 1 で対応し（対応表は :ref:`zone-section` の :numref:`zone-component` ）、  
  その種別の中に個々の **コンポーネントスクリプト** （定義）が並びます。  


  例：場 ↔ **キャラクター** 、フォグ領域 ↔ **フォグ** 、切札領域 ↔ **切札** 、ライフ領域 ↔ **ライフ** など。

**コンポーネントスクリプト（= 定義）**  
  種別の中にある個別の定義です。  

  例：キャラクター種別の中の《一般兵》《防壁》など

**ユニット**  
  盤面に存在する **実体** ( 1 体 = 1 枚以上のカードのまとまり)。  
  ユニットがスクリプトの **ユニット条件** に合致すると、そのユニットは当該 **コンポーネント** として扱われます。


要するに、 **ゾーン** が置き場を決め、そこで扱う要素の種類が **コンポーネント種別** 、その中の個別の定義が **コンポーネントスクリプト** 、盤面に現れる実体が **ユニット** です。


------------------------------------------------------------
コンポーネントスクリプトの共通・必須項目
------------------------------------------------------------

すべてのコンポーネントスクリプトは、次の 2 項目を **必ず** 持ちます。

- **領域（ゾーン）**  
  このスクリプトが属する置き場（例：場／フォグ領域／切札領域）。ゾーンの一覧は :ref:`zone-section` を参照。

- **ユニット条件**  
  盤面上のどのユニットをこのスクリプトの **コンポーネントとして扱うか** を定める条件。  
  例：キャラクター《一般兵》なら「数字 2〜10」。  


------------------------------------------------------------
ユニットとコンポーネントスクリプトの対応（共通原則）
------------------------------------------------------------

ユニットとスクリプトの **対応が決まる仕組み** を説明します。

**対応の判定（常時・自動）**  
  ルールは盤面上の全 **ユニット** について、各スクリプトの **ゾーン** と **ユニット条件** を常時評価します。  
  **ゾーン** が一致し、かつ **ユニット条件** を満たしたユニットは、そのスクリプトの **コンポーネントとして扱います** 。  
  どちらかを満たさないユニットは、そのスクリプトとしては扱いません。

**再評価のタイミング**  
  アクションの **解決** によりユニットの **生成／移動／分割・合体／数値や状態の変更** が起こるたび、対応は自動で再評価されます。  
  条件を満たせば「なる」、満たさなくなれば「外れる」――手動の付け替えは不要です。



例：一般兵（キャラクター）
------------------------------

- **ゾーン** ：場  
- **コンポーネントスクリプト名** ：一般兵  
- **ユニット条件** ：数字 2〜10  
- **解釈** ：盤面のユニットが数字 2〜10 のとき、そのユニットは「一般兵（種別：キャラクター）」として扱われ、アクションや能力で「一般兵」を参照する際の対象になります。


------------------------------
この先の読み方
------------------------------

.. このあと、ゾーン（領域）ごとに対応する **コンポーネント種別** を説明し、必要に応じて個別の **コンポーネントスクリプト** （定義）を列挙します。

このあと、コンポーネント種別ごとに個別の項目を説明します。要点は次のとおりです。

.. **ゾーン → コンポーネント種別 → コンポーネントスクリプト** の順に、置き場・種類・個別定義を掘り下げます。



- **ゾーン ↔ コンポーネント種別** は 1 対 1 で対応します（対応表は :ref:`zone-section` を参照）。
- **スクリプト定義がある種別** （例：キャラクター／フォグ／切札）は、共通項目（ **ゾーン** / **ユニット条件** ）＋種別固有項目を持ちます。
- **スクリプト定義がない種別** （例：ライフ／墓地／手札）は、枠組み（公開情報や移動規則など）のみをルール化し、定義リストは持ちません。

それでは、各ゾーンに置かれるコンポーネントを順に見ていきます。




.. contents:: コンポーネント一覧
   :depth: 2
   :local:



ライフ
==============================

.. index::
   single: ライフ

ライフユニットは、ゲーム開始時に「ライフ領域」に裏向きで配置されるカードです。  
プレイヤーの体力のようなもので、ダメージを受けるとライフが減っていきます。

- 中身は非公開です。
- 上から順に墓地へ移動します。
- スクリプト一覧：なし


墓地
==============================

.. index::
   single: ぼ|墓地

墓地ユニットは、使用済みや破壊されたカードを表向きに重ねて配置するコンポーネントです。

- ライフや場などから移動したカードが置かれます。
- 墓地の一番上のカードは完全公開です。
- 領域としては「表向きの捨て札置き場」です。
- スクリプト一覧：なし



手札
==============================

.. index::
   single: て|手札

手札は、ライフから引いてプレイヤーの手元に保持されるカードです。

- 枚数は完全公開、内容は個人公開です。
- 対象の選択やアクションの起点としてよく使われます。
- スクリプト一覧：なし



.. _character-component:

キャラクター
==============================

.. index::
   single: キャラクター


キャラクターとは、場に存在する兵士や防壁のことを指し、TCGでいう「クリーチャー」や「モンスター」に相当します。

キャラクターは1枚のカードで1体を表すこともあれば、
複数枚で1体を表すこともあります。(:numref:`character`)

.. _character:
.. figure:: images/character.*

    キャラクターの例


.. 具体的なキャラクターの持つ項目やサイズ、能力などは、 :numref:`character-component` を参照してください。


.. index::
    single: チャージ
    single: ドライブ

------------------------------
チャージとドライブ
------------------------------
キャラクターには、チャージ状態とドライブ状態が存在します。
チャージ状態は未使用状態を示し、ドライブ状態は使用済み状態を示しています。
また、キャラクターを横向きにすることを「ドライブ」、縦向きにすることを「チャージ」と言います。(:numref:`chargedrive`)

.. _chargedrive:

.. figure:: images/charge&drive.*

    チャージとドライブ

「場」領域に置かれるコンポーネントです。兵士や防壁を表します。

.. - 1枚または複数枚で構成
.. - ドライブ／チャージ状態を持つ

------------------------------
スクリプト一覧
------------------------------
次のリストで定義されています。

- :numref:`characterlist-act`

------------------------------
キャラクターの持つ項目
------------------------------
キャラクターの持つ項目について説明します。


.. index::
    single: キャラクター名

キャラクター名
 キャラクターの名称を示します。


.. index::
    single: タイプ(キャラクター)

タイプ
 キャラクターのタイプを示します。タイプは兵士と防壁の2種類が存在します。


.. .. index::
..    single: ユニット条件

.. ユニット条件
..  そのキャラクターがどのコンポーネント定義（コンポーネントスクリプト）に対応するかを示します。
..  スクリプト側で定義されている条件に合致するカードがユニットカードとなります。
..  キャラクターを示すカードです。複数枚で１体を表現する場合もあります。  

.. index::
    single: ラベル(キャラクター)

ラベル
 キャラクターに付与された属性を示します。<速攻> や <アタッカー> など様々なラベルがあります。
 ラベルは<>で括り記載されます。


.. index::
    single: サイズ

サイズ
 兵士の持つ大きさを示します。


.. index::
    single: の|能力(キャラクター)

能力
 キャラクターが持っている能力を記載しています。


キャラクターのサイズ
------------------------------
トランプの数字は、キャラクターの強さを示します。
基本はカードに記載された数字に準じますが、魔法などのアクションを使うことで
加算や減算されることがあります。


------------------------------
キャラクターの注意点
------------------------------

複数枚で1体となるキャラクターが防壁になったら?
------------------------------------------------------------

アクションの効果で兵士を防壁にすることがあります。
防壁は1枚で1体のキャラクターであるため、
複数枚からなるキャラクターが防壁となった場合、
複数体の防壁となります。

なお、複数枚からなるキャラクターが
墓地や手札に移った場合、
1体のキャラクターとして
扱うため複数枚合わせて移します。
チャージ状態、ドライブ状態となった場合も同様に1体のキャラクター
として扱います。


フォグ
==============================

.. index::
   single: フォグ

フォグは、フォグ領域に一時的に置かれるコンポーネントです。  
ターン中のみ効果を発揮する一時的な魔法のような存在です。

- 置かれるカードとタイミングは、アクションによって定義されます。
- 効果はターン終了時に自然に失われます。


------------------------------
スクリプト一覧
------------------------------
次のリストで定義されています。

- :numref:`foglist-act`


------------------------------
フォグの持つ項目
------------------------------
フォグの持つ項目について説明します。


.. .. index::
..    single: フォグキーカード

.. フォグキーカード
..  フォグを示すカードです。複数枚で１つを表現する場合もあります。  


.. index::
    single: の|能力(フォグ)

能力
 フォグが持っている能力を記載しています。



パック
==============================

.. index::
   single: パック

パックカードは、ゲーム開始時にデッキから一部を抜き出してパック領域に置かれるカードです。  
特定のフレームでのみ使用されます。

- 通常、非公開で裏向きに配置されます。
- アクション（例：パック開封）によって使用されます。
- スクリプト一覧：なし



レアカード
==============================

.. index::
   single: レアカード

レアカードは、ゲーム開始時に1枚選ばれ、特別な領域に伏せて配置されるカードです。  
アクションで呼び出されるまで公開されないことが多いです。

- 対象となるカードは1枚だけです。
- レアドローやレア召喚など、専用のアクションで使用されます。
- スクリプト一覧：なし



切札
==============================

.. index::
   single: き|切札

切札は、切札領域に置かれたカードを示します。  
各切札には固有の能力が割り当てられており、表にするとその能力が発動します。  
一度表になった切札は、裏返すか破壊されるまで能力が持続します。


------------------------------
スクリプト一覧
------------------------------
次のリストで定義されています。

- :numref:`trumplist-act-frame`


------------------------------
切札の持つ項目
------------------------------
切札の持つ項目について説明します。

.. .. index::
..    single: き|切札キーカード

.. 切札キーカード  
..     切札を示すカードです。スートと数字によって能力が異なります。  
..     裏向きで配置し、「オープン」アクションによって表にします。

.. index::
   single: ラベル(切札)

ラベル  
    切札に付与された属性を示します。

.. index::
    single: の|能力(切札)

能力  
    切札が表になった際に発揮する特殊効果を記載します。  
    能力の内容や発動条件は、エクストラリスト（切札リスト）に定義されています。

