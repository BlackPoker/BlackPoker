@startuml
'==============================
'【即時効果：アクション毎に処理】
'==============================

|即時効果: アクション毎に処理|
start
while ([6-5-1] アクションバッファから該当プレイヤーとタイミングの\n即時効果アクションを1件取り出せるか？) is (Yes)
  :[6-5-2] アクションバッファから即時効果アクションを取り出す;
  :[6-5-3] 取り出した即時効果アクションの効果を解決する;
  if ([6-5-4] 勝敗判定) then (決着)
    stop
  endif
  if ([6-5-5] アクションが新たな誘発を発生させたか？) then (Yes)
    :[6-5-6] 誘発したアクションをアクションバッファに追加;
    note left
      誘発したアクションのコントローラーは
      起因となったアクションのコントローラー
      になります。
    end note
  endif
endwhile
stop
@enduml
