
<!DOCTYPE html>

<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>コアルール &#8212; BlackPoker</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/insipid.css" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/translations.js"></script>
    <script defer src="../_static/insipid.js"></script>
    <script defer src="../_static/insipid-sidebar.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="next" title="共通ルール" href="../common/common.html" />
    <link rel="prev" title="はじめに" href="../init/init.html" />
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
  </head><body>
    <script type="text/javascript">
        document.body.classList.add('js');
    </script>
    <input type="checkbox" id="sidebar-checkbox" style="display: none;">
    <label id="overlay" for="sidebar-checkbox"></label>
    <div class="sidebar-resize-handle"></div>
    <script type="text/javascript">
        try {
            let sidebar = localStorage.getItem('sphinx-sidebar');
            const sidebar_width = localStorage.getItem('sphinx-sidebar-width');
            if (sidebar_width) {
                document.documentElement.style.setProperty('--sidebar-width', sidebar_width);
            }
            // show sidebar on wide screen
            if (!sidebar && window.matchMedia('(min-width: 100rem)').matches) {
                sidebar = 'visible';
                // NB: We don't store the value in localStorage!
            }
            if (sidebar === 'visible') {
                document.getElementById('sidebar-checkbox').checked = true;
            }
        } catch(e) {
            console.info(e);
        }
    </script>
    <header id="topbar-placeholder">
      <div id="topbar">
        <div id="titlebar">
          <div class="buttons">
            <label for="sidebar-checkbox" id="sidebar-button" role="button" tabindex="0" aria-controls="sphinxsidebar" accesskey="M">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"/></svg>
            </label>
            <button id="search-button" type="button" title="検索" aria-label="検索" aria-expanded="false" aria-controls="search-form" accesskey="S">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
            </button>
          </div>
          <div class="title">
            <a class="parent" href="../index.html" accesskey="U">BlackPoker</a>
            <a class="top" href="#">コアルール</a>
          </div>
          <div class="buttons">
            <button id="fullscreen-button" type="button" aria-hidden="true">
              <span class="enable">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M212.686 315.314L120 408l32.922 31.029c15.12 15.12 4.412 40.971-16.97 40.971h-112C10.697 480 0 469.255 0 456V344c0-21.382 25.803-32.09 40.922-16.971L72 360l92.686-92.686c6.248-6.248 16.379-6.248 22.627 0l25.373 25.373c6.249 6.248 6.249 16.378 0 22.627zm22.628-118.628L328 104l-32.922-31.029C279.958 57.851 290.666 32 312.048 32h112C437.303 32 448 42.745 448 56v112c0 21.382-25.803 32.09-40.922 16.971L376 152l-92.686 92.686c-6.248 6.248-16.379 6.248-22.627 0l-25.373-25.373c-6.249-6.248-6.249-16.378 0-22.627z"/></svg>
              </span>
              <span class="disable">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M4.686 427.314L104 328l-32.922-31.029C55.958 281.851 66.666 256 88.048 256h112C213.303 256 224 266.745 224 280v112c0 21.382-25.803 32.09-40.922 16.971L152 376l-99.314 99.314c-6.248 6.248-16.379 6.248-22.627 0L4.686 449.941c-6.248-6.248-6.248-16.379 0-22.627zM443.314 84.686L344 184l32.922 31.029c15.12 15.12 4.412 40.971-16.97 40.971h-112C234.697 256 224 245.255 224 232V120c0-21.382 25.803-32.09 40.922-16.971L296 136l99.314-99.314c6.248-6.248 16.379-6.248 22.627 0l25.373 25.373c6.248 6.248 6.248 16.379 0 22.627z"/></svg>
              </span>
            </button>
            <a href="https://github.com/BlackPoker/BlackPoker/" title="Github">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
            </a>
          </div>
        </div>
        <div id="searchbox" role="search">
          <form id="search-form" class="search" style="display: none" action="../search.html" method="get">
            <input type="search" name="q" placeholder="検索 ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
            <button>検索</button>
          </form>
        </div>
      </div>
    </header>

    <nav class="relbar">
      <a class="previous" href="../init/init.html" aria-label="前のトピックへ" accesskey="P">
        <div class="icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"/></svg>
        </div>
        <div class="title">
          <span class="text">
            <span class="direction">前へ</span>
            はじめに
          </span>
        </div>
      </a>
      <a class="next" href="../common/common.html" aria-label="次のトピックへ" accesskey="N">
        <div class="title">
          <span class="text">
            <span class="direction">次へ</span>
            共通ルール
          </span>
        </div>
        <div class="icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"/></svg>
        </div>
      </a>
    </nav>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
<nav class="crumbs">
  <ul>
    <li><a href="../index.html" aria-label="BlackPoker"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"/></svg></a> &#187;</li>
    <li><a href="">コアルール</a></li> 
  </ul>
</nav>
<section id="core-rst">
<span id="id1"></span><h1><span class="section-number">2. </span>コアルール<a class="headerlink" href="#core-rst" title="この見出しへのパーマリンク">¶</a></h1>
<p>コアルールは割込み処理が可能なターン制ゲームの開始から勝敗が決まるまでを定義します。</p>
<section id="index-0">
<span id="id2"></span><h2><span class="section-number">2.1. </span>ターン<a class="headerlink" href="#index-0" title="この見出しへのパーマリンク">¶</a></h2>
<p>このルールを説明する上でターンとは持つことができるものとします。
ターンを持っているプレイヤーは先に行動できます。
ターンを持っているプレイヤーをターンプレイヤーといいます。</p>
</section>
<section id="index-1">
<span id="id3"></span><h2><span class="section-number">2.2. </span>アクション<a class="headerlink" href="#index-1" title="この見出しへのパーマリンク">¶</a></h2>
<p>アクションとは、プレイヤーの行動を示します。
ターン制のゲームでは、プレイヤーは様々な行動を行います。
チェスであればコマを進めたり、ババ抜きであれば隣の人からカードを引くなどがあります。
それらをアクションと定義します。</p>
</section>
<section id="index-2">
<span id="id4"></span><h2><span class="section-number">2.3. </span>チャンス<a class="headerlink" href="#index-2" title="この見出しへのパーマリンク">¶</a></h2>
<p>アクションを起こすことができる機会をチャンスといいます。
チャンスを持っている間は何度でもアクションを起こすことができます。</p>
</section>
<section id="index-3">
<span id="id5"></span><h2><span class="section-number">2.4. </span>ステージ<a class="headerlink" href="#index-3" title="この見出しへのパーマリンク">¶</a></h2>
<p>アクションの解決順を整理するために使う領域です。
後入れ先出し方式で最後に積まれたアクションから順に解決されていきます。</p>
</section>
<section id="id6">
<h2><span class="section-number">2.5. </span>アクションの定義項目<a class="headerlink" href="#id6" title="この見出しへのパーマリンク">¶</a></h2>
<p>アクション、チャンス、ステージについて簡単に説明しました。
これらの概念を用いて、アクションに定義する項目を説明します。</p>
<p>アクションは次の項目を定義する必要があります。
他の項目は具体的にアクションを定義する際に、ゲームに合わせて追加して下さい。</p>
<blockquote>
<div><ul class="simple">
<li><p>効果（通常効果・即時効果）</p></li>
<li><p>タイミング</p></li>
</ul>
</div></blockquote>
<section id="index-4">
<span id="id7"></span><h3><span class="section-number">2.5.1. </span>効果<a class="headerlink" href="#index-4" title="この見出しへのパーマリンク">¶</a></h3>
<p>効果とはアクションの解決時にプレイヤーが行う行動です。
効果の中には、通常効果と即時効果があります。
違いについては、図(<a class="reference internal" href="#coreflow-2"><span class="std std-numref">Fig. 2.3</span></a>)を説明する際に分岐条件として登場します。</p>
</section>
<section id="timing">
<span id="index-5"></span><span id="id8"></span><h3><span class="section-number">2.5.2. </span>タイミング<a class="headerlink" href="#timing" title="この見出しへのパーマリンク">¶</a></h3>
<p>タイミングとは、アクションを起こすことができる時を示します。
タイミングには「メイン」と「クイック」の2種類あります。</p>
<dl id="index-6">
<dt>メイン</dt><dd><p>ターンプレイヤーかつステージが空の時に起こせるアクションです。</p>
<p>条件をまとめると次のようになります。</p>
<ul class="simple">
<li><p>チャンスを持っている</p></li>
<li><p>自分のターン</p></li>
<li><p>ステージが空</p></li>
</ul>
</dd>
</dl>
<dl id="index-7">
<dt>クイック</dt><dd><p>いつでも起こせるため、アクションをステージに積み重ねることができます。</p>
<p>条件をまとめると次のようになります。</p>
<ul class="simple">
<li><p>チャンスを持っている</p></li>
</ul>
</dd>
</dl>
<section id="id9">
<h4><span class="section-number">2.5.2.1. </span>エンドアクションの定義<a class="headerlink" href="#id9" title="この見出しへのパーマリンク">¶</a></h4>
<p>定義するアクションの中で最低１つは
ターンを別のプレイヤーにわたす効果を定義してください。
そうしないと、ターンが別のプレイヤーに渡らす、ゲームが進行しなくなります。</p>
</section>
<section id="id10">
<h4><span class="section-number">2.5.2.2. </span>アクションのコントローラー<a class="headerlink" href="#id10" title="この見出しへのパーマリンク">¶</a></h4>
<p>アクションを起こしたプレイヤーをそのアクションのコントローラーと呼びます。
効果はこのコントローラー視点で解釈されることになります。</p>
</section>
</section>
</section>
<section id="component">
<span id="index-8"></span><span id="id11"></span><h2><span class="section-number">2.6. </span>コンポーネント<a class="headerlink" href="#component" title="この見出しへのパーマリンク">¶</a></h2>
<p>ゲームにてプレイヤーが保有する駒やカードのことをコンポーネントと定義します。
コンポーネントは次の項目を持っています。</p>
<dl class="simple" id="index-9">
<dt>オーナー</dt><dd><p>コンポーネントの所有者を示します。大体のトランプゲームではトランプを1セットしか用いないため無視されますが、TCGのデッキなど個人所有のものを用いるゲームでは必要な項目となります。</p>
</dd>
</dl>
<dl class="simple" id="index-10">
<dt>コントローラー</dt><dd><p>現在そのコンポーネントを操作しているプレイヤーを示します。オーナーとコントローラーは基本同じプレイヤーが設定されますが、コントロールを奪うアクションがある場合、オーナーとコントローラーは異なります。</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>コンポーネントとアクションのコントローラー</p>
<p>コントローラーは制御している人という意味になるため、コンポーネントとアクションのコントローラー制御する対象が異なることになります。
コンポーネントとアクションの属性を次の図に示します。アクションにはオーナーがいない点が異なります。</p>
</div>
<figure class="align-default" id="id16">
<p class="plantuml">
<img src="../_images/plantuml-5973875432da5c6c9c30841afa726d28ed2ec522.svg" alt="hide methods
hide circle

class コンポーネント {
オーナー
コントローラー
}

class アクション {
コントローラー
}"/></p>
<figcaption>
<p><span class="caption-number">Fig. 2.1 </span><span class="caption-text">コンポーネントとアクションの属性</span><a class="headerlink" href="#id16" title="この画像へのパーマリンク">¶</a></p>
</figcaption>
</figure>
</section>
<section id="index-11">
<span id="id12"></span><h2><span class="section-number">2.7. </span>能力<a class="headerlink" href="#index-11" title="この見出しへのパーマリンク">¶</a></h2>
<p>能力とはアクションの効果とは異なる概念で、アクションを起こすことができたり、 アクションを誘発したりすることがでる力です。</p>
<p>能力を持つことができるのは、プレイヤーの他に駒やカードなどのゲームに登場するコンポーネントも持つことができます。
(<a class="reference internal" href="#ability-image"><span class="std std-numref">Fig. 2.2</span></a>)</p>
<figure class="align-default" id="id17">
<span id="ability-image"></span><p class="plantuml">
<img src="../_images/plantuml-976f45327f77d4f4ee1da59bff1cd262ba402df4.svg" alt="&#64;startuml

skinparam defaultTextAlignment center

!define ICONURL https://raw.githubusercontent.com/tupadr3/plantuml-icon-font-sprites/v2.2.0
!includeurl ICONURL/common.puml
!includeurl ICONURL/font-awesome-5/chess_pawn.puml

FA5_CHESS_PAWN(P1C,コンポーネント)
:プレイヤー1: as Player1
:プレイヤー2: as Player2
(〇〇アクションを起こせる) as Act1 &lt;&lt;能力&gt;&gt;
(●●アクションを起こせる) as Act2 &lt;&lt;能力&gt;&gt;
(△△アクションを起こせる) as Act3 &lt;&lt;能力&gt;&gt;
Player1 ---&gt; (Act1) : &quot;能力&quot;
Player1 ---&gt; (Act2) : &quot;能力&quot;
P1C --&gt; (Act3) : &quot;能力&quot;
Player2 ---&gt; (Act1) : &quot;能力&quot;
Player1 ..&gt; P1C : &quot;所有&quot;

&#64;enduml"/></p>
<figcaption>
<p><span class="caption-number">Fig. 2.2 </span><span class="caption-text">能力のイメージ</span><a class="headerlink" href="#id17" title="この画像へのパーマリンク">¶</a></p>
</figcaption>
</figure>
<p>能力には、次の種類があります。</p>
<dl class="simple" id="index-12">
<dt>常在型能力</dt><dd><p>能力が有効である場合、継続的に発揮される能力</p>
</dd>
</dl>
<dl class="simple" id="index-13">
<dt>誘発型能力</dt><dd><p>能力が有効である間に何かの契機でアクションを起こす能力</p>
</dd>
</dl>
<p>概ねのゲームでは、
ターン終了や駒をすすめるなどのアクションが定義されています。
そして、そのアクションを起こせる能力（常在型能力）を
プレイヤーは保持しています。</p>
</section>
<section id="coreflowsec">
<span id="index-14"></span><span id="id13"></span><h2><span class="section-number">2.8. </span>コアフロー<a class="headerlink" href="#coreflowsec" title="この見出しへのパーマリンク">¶</a></h2>
<p>この図にゲームの開始から勝敗が決まるまでの流れが集約されいます。(<a class="reference internal" href="#coreflow-2"><span class="std std-numref">Fig. 2.3</span></a>)</p>
<figure class="align-default" id="id18">
<span id="coreflow-2"></span><p class="plantuml">
<img src="../_images/plantuml-5610bc91072f4c0a9e055e42017e28d61d12ab17.svg" alt="&#64;startuml
start
:[1]ゲーム開始;
:[2]ターンプレイヤーにチャンスを移動;
repeat
if ([3]アクションを起こすか？) then (Yes)
    :[4]パス記録のリセット;
    :[5]アクションを起こす;
    :[6]誘発チェック;
    if ([7]即時効果か？) then (Yes)
        :[8]アクションの解決;
        if ([9]勝敗判定) then (決着)
            stop
        endif
        :[6]誘発チェック;
    else (No)
        :[10]ステージに追加;
    endif
else (No)
    :[11]パス記録に登録;
    if ([12]全員がパスしたか？) then (Yes)
        if ([13]ステージにアクションが存在するか？) then (Yes)
            :[14]ステージから取出し;
            :[8]アクションの解決;
            if ([9]勝敗判定) then (決着)
                stop
            endif
            :[6]誘発チェック;
            :[2]ターンプレイヤーにチャンスを移動;
        else (No)
        endif
    else (No)
        :[15]チャンス移動;
    endif
endif
repeat while()
&#64;enduml"/></p>
<figcaption>
<p><span class="caption-number">Fig. 2.3 </span><span class="caption-text">コアフロー</span><a class="headerlink" href="#id18" title="この画像へのパーマリンク">¶</a></p>
</figcaption>
</figure>
<dl class="simple" id="core-gamestart">
<dt>[1]ゲーム開始</dt><dd><p>先攻を決め、ゲームを始める準備を行います。</p>
</dd>
<dt>[2]ターンプレイヤーにチャンスを移動</dt><dd><p>ターンを持っているプレイヤーにチャンスを移動します。</p>
</dd>
<dt>[3]アクションを起こすか？</dt><dd><p>チャンスを持っているプレイヤーはアクションを起こすかを判断します。</p>
</dd>
<dt>[4]パス記録のリセット</dt><dd><p>パスしたプレイヤーの記録をリセットします。</p>
</dd>
<dt>[5]アクションを起こす</dt><dd><p>アクションを起こしこれからプレイヤーが行うことを宣言します。
ゲームによってアクションの起こし方は異なります。BlackPokerではアクション名を言い、コストの支払や対象を指定しアクションを起こします。
一方ババ抜きでは、隣のプレイヤーからカードを引く際に宣言せず暗黙にアクションが起きている場合もあります。</p>
</dd>
<dt>[6]誘発チェック</dt><dd><p>ここに至るまでに誘発したアクションがないかチェックします。誘発した場合、効果を解決するかスタックに追加します。詳しいフローは <a class="reference internal" href="#trigger-check"><span class="std std-numref">2.8.1 誘発チェック</span></a> を参照してください。</p>
</dd>
<dt>[7]即時効果か？</dt><dd><p>起こしたアクションが即時効果か通常効果か判定します。</p>
</dd>
</dl>
<dl class="simple" id="actresolve">
<dt>[8]アクションの解決</dt><dd><p>アクションの効果に定義されている内容を実行します。
その他にコンポーネントを捨て山に移動するなどゲームによって決まった処理があれば行います。
アクションの解決の中でも効果に定義されている内容を実行することのみを指す場合「効果を発揮する」と言います。</p>
</dd>
</dl>
<dl class="simple" id="winlose">
<dt>[9]勝敗判定</dt><dd><p>ゲームの勝敗を判定します。決着した場合ゲームが終了します。判定の方法はゲームにより異なります。</p>
</dd>
<dt>[10]ステージに追加</dt><dd><p>ステージというアクションを貯めておける領域に追加します。</p>
</dd>
<dt>[11]パス記録に登録</dt><dd><p>パスしたプレイヤーを記録します。パス記録がリセットされるため、同じプレイヤー名は2回登録されません。</p>
</dd>
<dt>[12]全員がパスしたか？</dt><dd><p>パス記録に全てのプレイヤー名が記録されているか判定します。</p>
</dd>
<dt>[13]ステージにアクションが存在するか？</dt><dd><p>ステージにアクションが存在するか判定します。</p>
</dd>
<dt>[14]ステージから取出し</dt><dd><p>最後にステージに追加されたアクションをステージから取出します。</p>
</dd>
<dt>[15]チャンス移動</dt><dd><p>チャンスを持っているプレイヤーからチャンスを持っていないプレイヤーにチャンスを移動します。
チャンスを移動するルールはゲームによって異なります。</p>
</dd>
</dl>
<section id="trigger-check">
<span id="id14"></span><h3><span class="section-number">2.8.1. </span>誘発チェック<a class="headerlink" href="#trigger-check" title="この見出しへのパーマリンク">¶</a></h3>
<p>能力の中でも誘発型能力は、なにかをきっかけにしてアクションが起きる条件が定義されています。
誘発する条件は「〜の場合」、「〜時」などで記載されており、誘発するアクションは「〜を誘発する」と記載されています。</p>
<p>誘発チェックでは、誘発したアクションの効果を解決もしくは、ステージに追加します。
誘発したアクションのコントローラーは起因となった誘発型能力を持ったコンポーネントのコントローラーになります。
誘発チェックは次の図のように行います。(<a class="reference internal" href="#trigger-flow"><span class="std std-numref">Fig. 2.4</span></a>)</p>
<figure class="align-default" id="id19">
<span id="trigger-flow"></span><p class="plantuml">
<img src="../_images/plantuml-3706c977d1e3edc6c020c1b97b3098f0c6d32a19.svg" alt="&#64;startuml
start
:[6-1]誘発したアクションをプレイヤー毎\nの誘発即時リストと誘発通常リストに追加;
while([6-2]誘発即時リスト、誘発通常リスト全体の件数判定) is (1件以上)
    group 即時効果:プレイヤー単位に繰返し
    note
        順番はターンプレイヤーから
        ターンが回る順に行う
    end note
    repeat :[6-3]プレイヤー毎に誘発即時リスト\nの即時効果のアクションを解決;
        group 即時効果:アクション単位に繰返し
        repeat :[6-4]誘発即時リストから即時効果の\nアクションを1つ取り出す;
            :[6-5]即時効果のアクションを解決;
            if([6-6]勝敗判定) then (決着)
                stop
            endif
            :[6-7]誘発したアクションをプレイヤー毎\nの誘発即時リストと誘発通常リストに追加;
        repeat while ([6-8]誘発即時リストの件数が0件でなけば繰り返す) is (YES)
        end group
    repeat while([6-9]全ての誘発即時リストの件数が0件でなければ繰り返す) is (YES)
    end group

    group 通常効果:プレイヤー単位に繰返し
    note
        順番はターンプレイヤーから
        ターンが回る順に行う
    end note
    repeat :[6-10]プレイヤー毎に誘発通常リスト\nのアクションをステージに追加;
        :[6-11]通常効果のアクションを\n任意の順でステージに追加;
        :[6-12]誘発したアクションをプレイヤー毎\nの誘発即時リストと誘発通常リストに追加;
    repeat while ([6-13]誘発リストに通常効果のアクションがあれば繰り返す) is (YES)
    end group

endwhile (0件)
    stop
&#64;enduml
"/></p>
<figcaption>
<p><span class="caption-number">Fig. 2.4 </span><span class="caption-text">誘発チェック</span><a class="headerlink" href="#id19" title="この画像へのパーマリンク">¶</a></p>
</figcaption>
</figure>
<dl class="simple" id="trigger-act-gather">
<dt>[6-1]誘発したアクションをプレイヤー毎の誘発即時リストと誘発通常リストに追加</dt><dd><p>全てのプレイヤー、コンポーネントが持っている誘発型能力を確認します。
誘発したアクションをコントローラーのプレイヤー毎に即時効果と通常効果に分け、
プレイヤー毎の誘発即時リスト、誘発通常リストに追加します。</p>
</dd>
<dt>[6-2]誘発即時リスト、誘発通常リスト全体の件数判定</dt><dd><p>プレイヤー毎の誘発即時リスト、誘発通常リストの合計件数を判定します。</p>
</dd>
<dt>[6-3]プレイヤー毎に誘発即時リストの即時効果のアクションを解決</dt><dd><p>プレイヤー毎に誘発即時リストの即時効果のアクションを解決を行います。
順番はターンプレイヤーからターンが回る順にプレイヤー毎に行います。</p>
</dd>
<dt>[6-4]誘発即時リストから即時効果のアクションを1つ取り出す</dt><dd><p>順番のプレイヤーは、 プレイヤー毎の誘発即時リストから1つ即時効果のアクションを取り出します。
取り出すアクションは任意に選択できます。</p>
</dd>
<dt>[6-5]即時効果のアクションを解決</dt><dd><p>アクションの効果を解決します。
詳しくは <a class="reference internal" href="#actresolve"><span class="std std-ref">[8]アクションの解決</span></a> 参照。</p>
</dd>
<dt>[6-6]勝敗判定</dt><dd><p>勝敗を判定します。
詳しくは <a class="reference internal" href="#winlose"><span class="std std-ref">[9]勝敗判定</span></a> 参照。</p>
</dd>
<dt>[6-7]誘発したアクションをプレイヤー毎の誘発即時リスト、誘発通常リストに追加</dt><dd><p>詳しくは <a class="reference internal" href="#trigger-act-gather"><span class="std std-ref">[6-1]誘発したアクションをプレイヤー毎の誘発即時リストと誘発通常リストに追加</span></a> 参照。</p>
</dd>
<dt>[6-8]誘発即時リストの件数が0件でなけば繰り返す</dt><dd><p>順番のプレイヤーの誘発即時リストに未解決の即時効果がある場合、
即時効果の解決を繰返します。</p>
</dd>
<dt>[6-9]全ての誘発即時リストの件数が0件でなければ繰り返す</dt><dd><p>プレイヤー毎の誘発即時リストに未解決のアクションがある場合、
再びプレイヤー毎に誘発即時リストの即時効果の解決を繰返します。</p>
</dd>
<dt>[6-10]プレイヤー毎に誘発通常リストのアクションをステージに追加</dt><dd><p>プレイヤー毎に誘発通常リストのアクションをステージに追加します。
順番はターンプレイヤーからターンが回る順にプレイヤー毎に行います。</p>
</dd>
<dt>[6-11]通常効果のアクションを任意の順でステージに追加</dt><dd><p>順番のプレイヤーは、 プレイヤー毎の誘発通常リストからアクションを任意の順でステージに追加します。</p>
</dd>
<dt>[6-12]誘発したアクションをプレイヤー毎に誘発即時リストと誘発通常リストにまとめる</dt><dd><p>詳しくは <a class="reference internal" href="#trigger-act-gather"><span class="std std-ref">[6-1]誘発したアクションをプレイヤー毎の誘発即時リストと誘発通常リストに追加</span></a> 参照。</p>
</dd>
<dt>[6-13]誘発通常リストにアクションがあれば繰り返す</dt><dd><p>プレイヤー毎の誘発通常リストにアクションがある場合、
順番を次のプレイヤーに渡し、プレイヤー毎に誘発通常リストのアクションをステージに追加します。</p>
</dd>
</dl>
</section>
</section>
<section id="id15">
<h2><span class="section-number">2.9. </span>まとめ<a class="headerlink" href="#id15" title="この見出しへのパーマリンク">¶</a></h2>
<p>コアルールについて説明しました。
すでにあるターン制のゲームからアクションを洗い出し、能力を整理することで割込処理を可能としゲームの新しい遊び方が見つけられます。
また、新しく作成するゲームに関してもコアルールを意識して作成することで、ルール追加がしやすいゲームが考えやすいと思います。</p>
</section>
</section>

            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">

            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/blackpoker.svg" alt="Logo"/>
            </a></p>
          <div class="sidebar-resize-handle"></div>

<h3><a href="../index.html">目次</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../init/init.html">1. はじめに</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2. コアルール</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#index-0">2.1. ターン</a></li>
<li class="toctree-l2"><a class="reference internal" href="#index-1">2.2. アクション</a></li>
<li class="toctree-l2"><a class="reference internal" href="#index-2">2.3. チャンス</a></li>
<li class="toctree-l2"><a class="reference internal" href="#index-3">2.4. ステージ</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id6">2.5. アクションの定義項目</a></li>
<li class="toctree-l2"><a class="reference internal" href="#component">2.6. コンポーネント</a></li>
<li class="toctree-l2"><a class="reference internal" href="#index-11">2.7. 能力</a></li>
<li class="toctree-l2"><a class="reference internal" href="#coreflowsec">2.8. コアフロー</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id15">2.9. まとめ</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../common/common.html">3. 共通ルール</a></li>
<li class="toctree-l1"><a class="reference internal" href="../format/format.html">4. フォーマット</a></li>
<li class="toctree-l1"><a class="reference internal" href="../match-regulations/match-regulations.html">5. 対戦レギュレーション</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/appendix.html">6. 付録</a></li>
</ul>

<div><hr class="docutils"></div>
<ul>
  <li class="toctree-l1"><a class="reference internal" href="../genindex.html" accesskey="I">総合索引</a></li>
</ul>
<div id="ethical-ad-placement"></div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>

    <nav class="relbar">
      <a class="previous" href="../init/init.html" aria-label="前のトピックへ" >
        <div class="icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"/></svg>
        </div>
        <div class="title">
          <span class="text">
            <span class="direction">前へ</span>
            はじめに
          </span>
        </div>
      </a>
      <a class="next" href="../common/common.html" aria-label="次のトピックへ" >
        <div class="title">
          <span class="text">
            <span class="direction">次へ</span>
            共通ルール
          </span>
        </div>
        <div class="icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"/></svg>
        </div>
      </a>
    </nav>
  

  <style>
    /* Sidebar header (and topbar for mobile) */
    .wy-side-nav-search, .wy-nav-top {
      background: black;
    }
    .wy-side-nav-search>div.version {
      color: #fff;
    }

  </style>
<!--   
    <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
      <span class="rst-current-version" data-toggle="rst-current-version">
        <span class="fa fa-book"> Read the Docs</span>
        v: latest
        <span class="fa fa-caret-down"></span>
      </span>
      <div class="rst-other-versions">
        <dl>
          <dt>Versions</dt>
          
            <dd><a href="#">latest</a></dd>
            <dd><a href="#">1.0</a></dd>
            <dd><a href="#">1.1</a></dd>
          
        </dl>
        <dl>
          <dt>Downloads</dt>
          <dd><a href="#">PDF</a></dd>
          <dd><a href="#">ePub</a></dd>
          <dd><a href="#">HTML</a></dd>
        </dl>
        <dl>
          
          <dt>On Read the Docs</dt>
            <dd>
              <a href="#">Project Home</a>
            </dd>
            <dd>
              <a href="#">Builds</a>
            </dd>
        </dl>
        <dl>
          <dt>Debug</dt>
          <dd><a href="#" data-toggle="rst-debug-badge">Swap badge position</a></dd>
        </dl>
      </div>
    </div> -->
  

  </body>
</html>